
<div class="foswikiRight">
[[%BASEWEB%.%BASETOPIC%][Latest News]] 
[[%SCRIPTURL{view}%/%BASEWEB%/%BASETOPIC%?showfrom=2008-12-1;showto=2009-1-1][Dec 2008]] 
 [[%SCRIPTURL{view}%/%BASEWEB%/%BASETOPIC%?showfrom=2008-11-1;showto=2008-12-1][Nov 2008]] 
 [[%SCRIPTURL{view}%/%BASEWEB%/%BASETOPIC%?showfrom=2008-10-1;showto=2008-11-1][Oct 2008]] 
 [[%SCRIPTURL{view}%/%BASEWEB%/%BASETOPIC%?showfrom=2008-09-1;showto=2008-10-1][Aug 2008]] 
 [[%SCRIPTURL{view}%/%BASEWEB%/%BASETOPIC%?showfrom=2008-08-1;showto=2008-09-1][Jul 2008]] 
</div>

---+ Latest News

%TABLE{tablewidth="99%" columnwidths="16em,80%,6em" }%
%SEARCH{
   "form.name~'%BASEWEB%.%BASETOPIC%' AND 
     fields[name='Show'].value = 'show' AND
     ( ( '%LASTMONTHDATE%' = '' AND d2n(fields[name='Expiry'].value) >= d2n('%DATE%') ) OR
      ('%LASTMONTHDATE%' != ''  AND d2n(fields[name='Date'].value) >= d2n('%SHOWFROM%') AND d2n(fields[name='Date'].value) < d2n('%SHOWTO%') ) )"
   type="query"
   nonoise="on"
   order="formfield(Date)"
   header="| *Date Posted* | *Message*  | ** |"
   format="| $formfield(Date) | $formfield(Message) - $formfield(Link) | [[$web.$topic][$percntICON{uweb-bo}$percnt]]  |"
}%

---
%TWISTY{
mode="div"
showlink="<b>Post a news Item</b>"
hidelink="Hide&nbsp;"
showimgright="%ICONURLPATH{toggleopen-small}%"
hideimgright="%ICONURLPATH{toggleclose-small}%"
}%

%STARTFORM{
name="newItem"
action="save"
topic="FoswikiApplicationData.NewsApplicationAUTOINC0000"
method="POST"
redirectto="%BASEWEB%.%BASETOPIC%"
}%
<style>
.formTitle { width:200px; }
.formValue { position:absolute;left:200px; }
#patternTopBar, #patternClearHeaderCenter, #patternClearHeaderLeft, #patternClearHeaderRight, #patternTopBarContentsOuter, #patternTopBarContents {
height:130px;
overflow:hidden;
}
</style>
%FORMELEMENT{
 	 mandatory="on"
        format="<p><span class='formTitle'> $t </span><span class='formValue'>  $e $m $h </span></p>"
        default="%DISPLAYTIME{"$day $month $year"}%"
type="date"
name="Date"
title="Date Posted"
size="16"
}%
%FORMELEMENT{
 	 mandatory="on"
        format="<p><span class='formTitle'> $t </span><span class='formValue'>  $e $m $h </span></p>"
        default="%CALC{"$FORMATTIME($TIMEADD($TIME(), 1, month), $day $mon $year)"}%"
type="date"
name="Expiry"
title="Expiry date"
size="16"
}%
%FORMELEMENT{
 	 mandatory="on"
        format="<p><span class='formTitle'> $t </span><span class='formValue'>  $e $m $h </span></p>"
type="text"
name="Message"
title="Message"
size="70"
}%
%FORMELEMENT{
        format="<p><span class='formTitle'> $t </span><span class='formValue'>  $e $m $h </span></p>"
type="text"
name="Link"
title="Link"
size="70"
}%
%FORMELEMENT{type="hidden" name="Show" default="show"}%
%FORMELEMENT{type="hidden" name="formtemplate" default="%WEB%.%TOPIC%"}%
%FORMELEMENT{type="hidden" name="topicparent" default="%BASEWEB%.%BASETOPIC%"}%
%FORMELEMENT{
type="submit"
buttonlabel="Post news item"
}%
%ENDFORM%
%ENDTWISTY%

%TWISTY{
mode="div"
showlink="Item definition (will be hidden from users)"
hidelink="Hide&nbsp;"
showimgright="%ICONURLPATH{toggleopen-small}%"
hideimgright="%ICONURLPATH{toggleclose-small}%"
}%
| *Name* | *Type* | *Size* | *Values* | *Tooltip message* | *Attributes* |
| Date      | date     | 16        |                | %DATE% | m  |
| Message | text | 64 |  |  | m  |
| Link | text | 64 | | blah blah... |   |
| Show | checkbox | 1 | show | | |
| Expiry      | date     | 16        |                | %CALC{"$FORMATTIME($TIMEADD($TIME(), 1, month), $day $mon $year)"}% | m  |

   * Set LASTMONTHDATE = %URLPARAM{"showfrom" default=""}%
   * Set SHOWFROM = %URLPARAM{"showfrom" default=""}%
   * Set SHOWTO = %URLPARAM{"showto" default=""}%



%ENDTWISTY%
