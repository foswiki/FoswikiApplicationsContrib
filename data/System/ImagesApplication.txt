---++ %TOPIC% Usage
To Add the todo application to any topic, you can use the following TML:

   * =%<nop>INCLUDE{"%SYSTEMWEB%.%TOPIC%"}%=
or if you want to set limits explicitly
   * =%<nop>INCLUDE{"%SYSTEMWEB%.%TOPIC%" IMAGE="uniquename" WIDTH="300px" HEIGHT="200px" STYLE="border:none;}%=
   
If you have more than one Image in the same topic, unique within that topic.
   
Images are selected from attachments uploaded to the topic you are displaying them, and the comment field is used to tell the application which to show.



---+++ urlparams
   * ?item=imagename - select a different image

---++ Application definition
%STARTINCLUDE%<style>
.%TOPIC%%IMAGE% {
	 border:1px black solid;
	 width: %IF{"defined WIDTH" then="%WIDTH%" else="300px"}%;
	 height:%IF{"defined HEIGHT" then="%HEIGHT%" else="200px"}%;
	 background:url(%PUBURL%/%BASEWEB%/%BASETOPIC%/%META{ "attachments" template="ImagesApplicationItem" }%) white no-repeat;
	 overflow:hidden;
	 %IF{"defined STYLE" then="%STYLE%" else=";"}%
}
</style><div class="%TOPIC%%IMAGE%" >
%INCLUDE{
	"%WEB%.%TOPIC%"
	section="%IF{"
			   defined 'item' AND 
				    ($'item' ~ $'IMAGE' 
					     OR 
				    (NOT defined 'IMAGE')
			   )" then="edit_item_selector" else="view_item"}%"
      IMAGE="%IF{"defined 'IMAGE'" then="%IMAGE%" else="singleimage"}%"
}%
</div>%STOPINCLUDE%

---
---+++ view item format
<verbatim>
%STARTSECTION{"view_item"}%
[[%SCRIPTURL{view}%/%BASEWEB%/%BASETOPIC%?item=%IMAGE%][%ICON{uweb-bo}%]]  
%IF{
	 "'%META{ "attachments" template="ImagesApplicationItem" }%' =''" 
	 then="no image selected" else="%META{ "attachments" template="ImagesApplicationItem" }%"
}%%ENDSECTION{"view_item"}%
</verbatim>
---+++ edit_item_selector 
<verbatim>
%STARTSECTION{"edit_item_selector"}%
%INCLUDE{
	"%WEB%.%TOPIC%"
	section="%IF{"'%META{ "attachments" template="ImagesApplicationList" }%' = ''" then="no_attachments" else="edit_item"}%"
      IMAGE="%IF{"defined 'IMAGE'" then="%IMAGE%" else="singleimage"}%"
}%
%ENDSECTION{"edit_item_selector"}%
---+++ no_attachments 
<verbatim>
%STARTSECTION{"no_attachments"}%
no attachments available %BR%
<a class='foswikiButton foswikiButton' href='%SCRIPTURL{upload}%/%BASEWEB%/%BASETOPIC%'>Upload</a> 
some attachments to this topic or  %BR%
<a class='foswikiButton foswikiCancelButton' href='%SCRIPTURL{view}%/%BASEWEB%/%BASETOPIC%'>Cancel</a>
%ENDSECTION{"no_attachments"}%

---+++ edit item format
<verbatim>
%STARTSECTION{"edit_item"}%
%STARTFORM{
	 name="%TOPIC%%BASETOPIC%%IMAGE%"
	 action="upload"
	 topic="%BASEWEB%.%BASETOPIC%"
	 method="POST"
	 redirectto="%BASEWEB%.%BASETOPIC%"
	 sep=" "
	 showerrors="off"
}% 
%FORMELEMENT{
	 name="filename"
	 format="<span class='formImage'>  $e $m $h </span>%BR%"
	 default="%META{ "attachments" template="ImagesApplicationItem" }%"
	 type="select"
	 options="%META{ "attachments" template="ImagesApplicationList" }%"
	 title="%IMAGENAME%IMAGE%%"
	 size="1"
}% %FORMELEMENT{type="hidden" name="changeproperties" default="on"
}% %FORMELEMENT{type="hidden" name="filecomment" default="%IMAGE%"
}% %FORMELEMENT{type="hidden" name="%IF{"defined 'IMAGE'" then="item" else="nothingtoseehere"}%" default="%IMAGE%"
}%  %FORMELEMENT{
	 type="submit"
	 buttonlabel="Submit"
}% %IF{"defined 'IMAGE'" then="<a class='foswikiButton foswikiCancelButton' href='%SCRIPTURL{view}%/%BASEWEB%/%BASETOPIC%'>Cancel</a>" else=""
}% %ENDFORM% %ENDSECTION{"edit_item"}%
</verbatim>

