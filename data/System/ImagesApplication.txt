%META:TOPICINFO{author="SvenDowideit" date="1232071416" format="1.1" reprev="1.12" version="1.12"}%%META:TOPICPARENT{name="WebMenu"}%<div class="foswikiRight">[[%BASEWEB%.%BASETOPIC%][Latest News]] [[%SCRIPTURL{view}%/%BASEWEB%/%BASETOPIC%?showfrom=2008-12-1;showto=2009-1-1][Dec 2008]]  [[%SCRIPTURL{view}%/%BASEWEB%/%BASETOPIC%?showfrom=2008-11-1;showto=2008-12-1][Nov 2008]]  [[%SCRIPTURL{view}%/%BASEWEB%/%BASETOPIC%?showfrom=2008-10-1;showto=2008-11-1][Oct 2008]]  [[%SCRIPTURL{view}%/%BASEWEB%/%BASETOPIC%?showfrom=2008-09-1;showto=2008-10-1][Aug 2008]]  [[%SCRIPTURL{view}%/%BASEWEB%/%BASETOPIC%?showfrom=2008-08-1;showto=2008-09-1][Jul 2008]] </div>---+ Latest News%TABLE{tablewidth="99%" columnwidths="16em,80%,6em" }%%SEARCH{   "form.name~'%BASEWEB%.%BASETOPIC%' AND      fields[name='Show'].value = 'show' AND     ( ( '%LASTMONTHDATE%' = '' AND d2n(fields[name='Expiry'].value) >= d2n('%DATE%') ) OR      ('%LASTMONTHDATE%' != ''  AND d2n(fields[name='Date'].value) >= d2n('%SHOWFROM%') AND d2n(fields[name='Date'].value) < d2n('%SHOWTO%') ) )"   type="query"   nonoise="on"   order="formfield(Date)"   header="| *Date Posted* | *Message*  | ** |"   format="| $formfield(Date) | $formfield(Message) - $formfield(Link) | [[$web.$topic][$percntICON{uweb-bo}$percnt]]  |"}%---%TWISTY{mode="div"showlink="<b>Post a news Item</b>"hidelink="Hide&nbsp;"showimgright="%ICONURLPATH{toggleopen-small}%"hideimgright="%ICONURLPATH{toggleclose-small}%"}%%STARTFORM{name="newItem"action="save"topic="%WEB%.NewsItemAUTOINC0000"method="POST"redirectto="%BASEWEB%.%BASETOPIC%"}%<style>.formTitle { width:200px; }.formValue { position:absolute;left:200px; }#patternTopBar, #patternClearHeaderCenter, #patternClearHeaderLeft, #patternClearHeaderRight, #patternTopBarContentsOuter, #patternTopBarContents {height:130px;overflow:hidden;}</style>%FORMELEMENT{ 	 mandatory="on"        format="<p><span class='formTitle'> $t </span><span class='formValue'>  $e $m $h </span></p>"        default="%DISPLAYTIME{"$day $month $year"}%"type="date"name="Date"title="Date Posted"size="16"}%%FORMELEMENT{ 	 mandatory="on"        format="<p><span class='formTitle'> $t </span><span class='formValue'>  $e $m $h </span></p>"        default="%CALC{"$FORMATTIME($TIMEADD($TIME(), 1, month), $day $mon $year)"}%"type="date"name="Expiry"title="Expiry date"size="16"}%%FORMELEMENT{ 	 mandatory="on"        format="<p><span class='formTitle'> $t </span><span class='formValue'>  $e $m $h </span></p>"type="text"name="Message"title="Message"size="70"}%%FORMELEMENT{        format="<p><span class='formTitle'> $t </span><span class='formValue'>  $e $m $h </span></p>"type="text"name="Link"title="Link"size="70"}%%FORMELEMENT{type="hidden" name="Show" default="show"}%%FORMELEMENT{type="hidden" name="formtemplate" default="%BASEWEB%.%BASETOPIC%"}%%FORMELEMENT{type="hidden" name="topicparent" default="%BASEWEB%.%BASETOPIC%"}%%FORMELEMENT{type="submit"buttonlabel="Post news item"}%%ENDFORM%%ENDTWISTY%<div style="width:902px;height:200px;"><div style="float:right;width:300px;height:200px;background: lightgreen;">graphic 2</div><div style="width:600px;height:200px;background: lightblue;">graphic 1</div></div>%TWISTY{mode="div"showlink="Item definition (will be hidden from users)"hidelink="Hide&nbsp;"showimgright="%ICONURLPATH{toggleopen-small}%"hideimgright="%ICONURLPATH{toggleclose-small}%"}%| *Name* | *Type* | *Size* | *Values* | *Tooltip message* | *Attributes* || Date      | date     | 16        |                | %DATE% | m  || Message | text | 64 |  |  | m  || Link | text | 64 | | blah blah... |   || Show | checkbox | 1 | show | | || Expiry      | date     | 16        |                | %CALC{"$FORMATTIME($TIMEADD($TIME(), 1, month), $day $mon $year)"}% | m  |   * Set LASTMONTHDATE = %URLPARAM{"showfrom" default=""}%   * Set SHOWFROM = %URLPARAM{"showfrom" default=""}%   * Set SHOWTO = %URLPARAM{"showto" default=""}%%ENDTWISTY%---++ TODO's---++ News App   1 remove the actions top and bottom - most user's won't have access to any of them for this topic   1 the HomePage News should contain the top 2 items from each area, and its own news.   1 top history needs to be generated using calc - not as static last x months, but months before & after requested - unless its latest..   1 clicking button in list should really edit using the same form as create new   1 can we move the edit/create to be part of the table?---++ GraphicsApp   1 make the 2 graphics be selected from attachments attached to this topic   1 when no graphics are selected, the template should auto-adjust.   1 each of the 2 image things should be seperate instances of GraphicsApp, with params like name, size, change group, if in change group, there's a caption that allows them to select a different image from a list of attachments to this topic or to some common images topic. (some filtering for size?)---++ general   1 can i add a 'deploy App' to the app topic / side bar which then uses comment below / above some selected text in topic?%META:FILEATTACHMENT{name="Earth_Clouds.gif" attachment="Earth_Clouds.gif" attr="" comment="" date="1232070971" path="Earth (Clouds).gif" size="2760" stream="IO::File=GLOB(0x1690f00)" tmpFilename="/var/tmp/CGItemp24855" user="SvenDowideit" version="1"}%